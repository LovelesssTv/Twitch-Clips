<html>
<body>
    <iframe id="twitchPlayer1" width="1920" height="1080" frameborder="0" allowfullscreen></iframe>
    <iframe id="twitchPlayer2" width="1920" height="1080" frameborder="0" allowfullscreen style="display:none;"></iframe>

    <script>
        const originalClips = [
            "https://clips.twitch.tv/embed?clip=BashfulStrongApePeteZarollTie&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=CooperativeDeadSoybean4Head-jk8JNEFYap_s2T0A&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=ConfidentPluckyLarkTBTacoRight-Ln2GHq1wtBEuDrJU&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=AbstemiousCharmingMangetoutDxCat&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=EasyTolerantCoyoteTBTacoRight--Jtl0vA39gRLwA2N&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=CorrectBillowingGorillaMoreCowbell-n1Ab71TZLZGHJ5pm&parent=lovelessstv.github.io"
        ];

        let clips = [...originalClips];
        let currentPlayer = 1; // Indica quale iframe Ã¨ visibile

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function getNextClip() {
            if (clips.length === 0) {
                clips = [...originalClips];
                shuffleArray(clips);
                console.log("Lista clip rimescolata");
            }

            const nextClip = clips.pop();
            console.log("Clip selezionata:", nextClip);

            const player1 = document.getElementById("twitchPlayer1");
            const player2 = document.getElementById("twitchPlayer2");

            if (currentPlayer === 1) {
                player2.src = nextClip + "&autoplay=true";
                player2.style.display = "block";
                player1.style.display = "none";
                currentPlayer = 2;
            } else {
                player1.src = nextClip + "&autoplay=true";
                player1.style.display = "block";
                player2.style.display = "none";
                currentPlayer = 1;
            }
        }

        shuffleArray(clips);
        getNextClip();
        setInterval(getNextClip, 30000);
    </script>
</body>
</html>
