<html>
<body>
    <iframe id="twitchPlayer" width="1920" height="1080" frameborder="0" allowfullscreen></iframe>
    <script>
        // Lista delle clip
        const clips = [
            "https://clips.twitch.tv/embed?clip=BashfulStrongApePeteZarollTie&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=CooperativeDeadSoybean4Head-jk8JNEFYap_s2T0A&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=ConfidentPluckyLarkTBTacoRight-Ln2GHq1wtBEuDrJU&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=AbstemiousCharmingMangetoutDxCat&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=EasyTolerantCoyoteTBTacoRight--Jtl0vA39gRLwA2N&parent=lovelessstv.github.io",
            "https://clips.twitch.tv/embed?clip=CorrectBillowingGorillaMoreCowbell-n1Ab71TZLZGHJ5pm&parent=lovelessstv.github.io"
        ];

        let lastClipIndex = -1; // Memorizza l'ultimo indice usato

        function getRandomClip() {
            let randomIndex;

            // Garantisce che la clip scelta sia diversa dalla precedente
            do {
                randomIndex = Math.floor(Math.random() * clips.length);
            } while (randomIndex === lastClipIndex);

            lastClipIndex = randomIndex;
            const randomClip = clips[randomIndex];
            console.log("Clip selezionata:", randomClip);

            const player = document.getElementById("twitchPlayer");
            player.src = ""; // Pulisce l'iframe

            setTimeout(() => {
                player.src = randomClip + "&autoplay=true";  
            }, 100);
        }

        // Avvia la prima clip e poi cambia ogni 30 secondi
        getRandomClip();
        setInterval(getRandomClip, 30000);
    </script>
</body>
</html>
